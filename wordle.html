<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wordle | Telegram</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 1.5em;
            margin-bottom: 5px;
            color: #4cc9f0;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin: 15px 0;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 15px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.2em;
            font-weight: bold;
            color: #4cc9f0;
        }

        .game-board {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 20px;
            max-width: 350px;
            margin: 0 auto 20px;
        }

        .row {
            display: flex;
            gap: 8px;
            justify-content: center;
        }

        .cell {
            width: 50px;
            height: 50px;
            border: 2px solid #4cc9f0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: bold;
            background: rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .cell.filled {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }

        .cell.correct {
            background: #4cc9f0;
            border-color: #4cc9f0;
            color: white;
        }

        .cell.present {
            background: #f72585;
            border-color: #f72585;
            color: white;
        }

        .cell.absent {
            background: #7209b7;
            border-color: #7209b7;
            color: white;
        }

        .keyboard {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 20px;
            max-width: 350px;
            margin: 0 auto;
        }

        .keyboard-row {
            display: flex;
            gap: 6px;
            justify-content: center;
        }

        .key {
            flex: 1;
            height: 50px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .key:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .key.wide {
            flex: 2;
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .btn {
            background: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .message {
            text-align: center;
            padding: 15px;
            margin: 15px 0;
            background: rgba(247, 37, 133, 0.2);
            border-radius: 10px;
            font-weight: bold;
        }

        .hidden {
            display: none;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 400px) {
            .cell {
                width: 45px;
                height: 45px;
                font-size: 1.3em;
            }
            
            .key {
                height: 45px;
                font-size: 1em;
            }
        }

        @media (max-width: 350px) {
            .cell {
                width: 40px;
                height: 40px;
                font-size: 1.2em;
            }
            
            .key {
                height: 40px;
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ WORDLE</h1>
            <p>–£–≥–∞–¥–∞–π —Å–ª–æ–≤–æ –∏–∑ 5 –±—É–∫–≤!</p>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div>–ü–æ–ø—ã—Ç–∫–∞</div>
                <div class="stat-value" id="current-attempt">1/6</div>
            </div>
            <div class="stat-item">
                <div>–°–ª–æ–≤–æ</div>
                <div class="stat-value" id="word-length">5 –±—É–∫–≤</div>
            </div>
        </div>

        <div class="game-board" id="game-board">
            <!-- –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è JavaScript -->
        </div>

        <div class="message" id="game-message">
            –í–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–æ –∏–∑ 5 –±—É–∫–≤
        </div>

        <div class="keyboard" id="keyboard">
            <!-- –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è JavaScript -->
        </div>

        <div class="controls">
            <button class="btn" onclick="newGame()">üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
            <button class="btn" onclick="shareResult()">üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
        </div>
    </div>

    <script>
        // –û—Å–Ω–æ–≤–Ω–æ–π –æ–±—ä–µ–∫—Ç Telegram WebApp
        const tg = window.Telegram.WebApp;

        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currentGame = {
            word: '',
            attempts: 0,
            maxAttempts: 6,
            currentGuess: '',
            gameOver: false,
            guessed: false
        };

        // –ë–∞–∑–∞ —Ä—É—Å—Å–∫–∏—Ö —Å–ª–æ–≤ –∏–∑ 5 –±—É–∫–≤
        const WORDS = [
            "–ê–ë–†–ò–°", "–ê–í–ì–ò–ô", "–ê–ó–ê–†–¢", "–ê–ö–¶–ò–Ø", "–ê–õ–ú–ê–ó", "–ê–ú–ï–ë–ê", "–ê–ù–û–ù–°", "–ê–†–ë–£–ó", "–ê–ö–¢–ï–†", "–ê–õ–õ–ï–Ø",
            "–ë–ê–ù–ö–ê", "–ë–ê–†–ò–ù", "–ë–ï–ì–£–ù", "–ë–ï–î–†–û", "–ë–ï–õ–ö–ê", "–ë–ï–õ–û–ö", "–ë–ï–†–¶–û", "–ë–ò–ó–û–ù", "–ë–õ–û–•–ê", "–ë–£–ö–ï–¢",
            "–í–ê–õ–ï–¢", "–í–ï–°–õ–û", "–í–ï–¢–ï–†", "–í–ò–î–ï–û", "–í–ò–õ–ö–ê", "–í–ò–†–£–°", "–í–ö–£–°–ï", "–í–û–î–ö–ê", "–í–û–õ–ù–ê", "–í–´–ó–û–í",
            "–ì–ê–ó–û–ù", "–ì–ê–ú–ú–ê", "–ì–ê–£–°–°", "–ì–ï–ù–†–ò", "–ì–õ–ò–ù–ê", "–ì–ù–ï–í–û", "–ì–û–õ–û–î", "–ì–†–ê–§–ê", "–ì–†–û–ó–ê", "–ì–†–£–®–ê",
            "–î–ï–°–ù–ê", "–î–ñ–ò–ù–ù", "–î–ò–ï–¢–ê", "–î–û–ó–û–†", "–î–û–ß–ö–ê", "–î–†–ê–ú–ê", "–î–£–ü–õ–û", "–î–´–†–ö–ê", "–î–û–ú–ë–ò", "–î–ï–ù–î–ò",
            "–ï–í–†–ï–ô", "–ï–ó–î–û–ö", "–ï–°–ê–£–õ", "–ï–ù–û–¢", "–ï–õ–¨", "–ï–ñ", "–ï–î–ö–ò–ô", "–ï–ó–î–ê", "–ï–í–ù–£–•", "–ï–†–ê–õ–ê–®",
            "–ñ–ê–ö–ï–¢", "–ñ–ê–¢–í–ê", "–ñ–ò–í–û–¢", "–ñ–ò–õ–¨–ï", "–ñ–ò–†–ê–§", "–ñ–£–ß–û–ö", "–ñ–ù–ï–¶", "–ñ–†–ï–¶", "–ñ–ú–´–•", "–ñ–ì–£–¢",
            "–ó–ê–ë–û–†", "–ó–ê–ö–ê–ó", "–ó–ê–ü–ê–•", "–ó–í–ï–ù–û", "–ó–ï–ë–†–ê", "–ó–ï–ú–õ–Ø", "–ó–ï–†–ù–û", "–ó–ú–ï–Ø", "–ó–£–ë–†", "–ó–ê–õ–ò–í",
            "–ò–í–†–ò–¢", "–ò–ì–†–û–ö", "–ò–î–ï–ê–õ", "–ò–ö–û–¢–ê", "–ò–ù–î–ò–ô", "–ò–°–ö–†–ê", "–ò–°–ü–£–ì", "–ò–•–¢–ò–û", "–ò–ö–û–ù–ê", "–ò–®–ò–ê–°",
            "–ö–ê–ó–ê–ù", "–ö–ê–õ–ò–ô", "–ö–ê–ü–õ–Ø", "–ö–ê–°–ö–ê", "–ö–ï–¢–ß–£", "–ö–ò–°–¢–¨", "–ö–õ–ï–†–ö", "–ö–ù–ò–ì–ê", "–ö–û–ñ–ê", "–ö–†–ê–ù"
        ];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            console.log('Initializing Wordle game...');
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Telegram WebApp
            tg.expand();
            tg.ready();

            // –°–æ–∑–¥–∞–µ–º –∏–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ
            createGameBoard();
            
            // –°–æ–∑–¥–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
            createKeyboard();
            
            // –ù–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—É—é –∏–≥—Ä—É
            newGame();
            
            console.log('Game initialized successfully');
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
        function createGameBoard() {
            const gameBoard = document.getElementById('game-board');
            gameBoard.innerHTML = '';

            for (let row = 0; row < currentGame.maxAttempts; row++) {
                const rowElement = document.createElement('div');
                rowElement.className = 'row';
                
                for (let col = 0; col < 5; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.id = `cell-${row}-${col}`;
                    rowElement.appendChild(cell);
                }
                
                gameBoard.appendChild(rowElement);
            }
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        function createKeyboard() {
            const keyboard = document.getElementById('keyboard');
            keyboard.innerHTML = '';

            const keyboardLayout = [
                ['–ô', '–¶', '–£', '–ö', '–ï', '–ù', '–ì', '–®', '–©', '–ó', '–•', '–™'],
                ['–§', '–´', '–í', '–ê', '–ü', '–†', '–û', '–õ', '–î', '–ñ', '–≠'],
                ['ENTER', '–Ø', '–ß', '–°', '–ú', '–ò', '–¢', '–¨', '–ë', '–Æ', 'BACKSPACE']
            ];

            keyboardLayout.forEach(row => {
                const rowElement = document.createElement('div');
                rowElement.className = 'keyboard-row';
                
                row.forEach(key => {
                    const keyElement = document.createElement('button');
                    keyElement.className = 'key';
                    keyElement.textContent = key;
                    
                    if (key === 'ENTER' || key === 'BACKSPACE') {
                        keyElement.classList.add('wide');
                    }
                    
                    keyElement.onclick = () => handleKeyPress(key);
                    rowElement.appendChild(keyElement);
                });
                
                keyboard.appendChild(rowElement);
            });
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–ª–∞–≤–∏—à
        function handleKeyPress(key) {
            if (currentGame.gameOver) return;

            if (key === 'BACKSPACE') {
                if (currentGame.currentGuess.length > 0) {
                    currentGame.currentGuess = currentGame.currentGuess.slice(0, -1);
                    updateGameBoard();
                }
            } else if (key === 'ENTER') {
                if (currentGame.currentGuess.length === 5) {
                    checkGuess();
                } else {
                    showMessage('–°–ª–æ–≤–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∏–∑ 5 –±—É–∫–≤!');
                }
            } else {
                if (currentGame.currentGuess.length < 5) {
                    currentGame.currentGuess += key;
                    updateGameBoard();
                }
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
        function updateGameBoard() {
            for (let row = 0; row < currentGame.maxAttempts; row++) {
                for (let col = 0; col < 5; col++) {
                    const cell = document.getElementById(`cell-${row}-${col}`);
                    cell.textContent = '';
                    cell.className = 'cell';
                    
                    if (row === currentGame.attempts) {
                        if (col < currentGame.currentGuess.length) {
                            cell.textContent = currentGame.currentGuess[col];
                            cell.classList.add('filled');
                        }
                    }
                }
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è
        function checkGuess() {
            const guess = currentGame.currentGuess.toUpperCase();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ —Å–ª–æ–≤–æ –≤ –±–∞–∑–µ
            if (!WORDS.includes(guess)) {
                showMessage('–¢–∞–∫–æ–≥–æ —Å–ª–æ–≤–∞ –Ω–µ—Ç –≤ –±–∞–∑–µ!');
                return;
            }

            currentGame.attempts++;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –±—É–∫–≤—ã
            const result = checkLetters(guess);
            updateBoardWithResult(guess, result);
            
            if (guess === currentGame.word) {
                // –ü–æ–±–µ–¥–∞!
                currentGame.guessed = true;
                currentGame.gameOver = true;
                showMessage(`üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã —É–≥–∞–¥–∞–ª–∏ —Å–ª–æ–≤–æ "${currentGame.word}" –∑–∞ ${currentGame.attempts} –ø–æ–ø—ã—Ç–æ–∫!`);
            } else if (currentGame.attempts >= currentGame.maxAttempts) {
                // –ü–æ—Ä–∞–∂–µ–Ω–∏–µ
                currentGame.gameOver = true;
                showMessage(`üíî –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –ó–∞–≥–∞–¥–∞–Ω–Ω–æ–µ —Å–ª–æ–≤–æ: ${currentGame.word}`);
            } else {
                // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –∏–≥—Ä—É
                currentGame.currentGuess = '';
                updateStats();
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±—É–∫–≤
        function checkLetters(guess) {
            const result = Array(5).fill('absent');
            const wordLetters = currentGame.word.split('');
            const guessLetters = guess.split('');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
            for (let i = 0; i < 5; i++) {
                if (guessLetters[i] === wordLetters[i]) {
                    result[i] = 'correct';
                    wordLetters[i] = null;
                }
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –±—É–∫–≤—ã
            for (let i = 0; i < 5; i++) {
                if (result[i] !== 'correct' && wordLetters.includes(guessLetters[i])) {
                    result[i] = 'present';
                    wordLetters[wordLetters.indexOf(guessLetters[i])] = null;
                }
            }
            
            return result;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Å–∫–∏ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
        function updateBoardWithResult(guess, result) {
            for (let col = 0; col < 5; col++) {
                const cell = document.getElementById(`cell-${currentGame.attempts-1}-${col}`);
                cell.textContent = guess[col];
                cell.classList.add(result[col]);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
                updateKeyboard(guess[col], result[col]);
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        function updateKeyboard(letter, status) {
            const keys = document.querySelectorAll('.key');
            keys.forEach(key => {
                if (key.textContent === letter) {
                    if (status === 'correct') {
                        key.style.background = '#4cc9f0';
                    } else if (status === 'present' && key.style.background !== '#4cc9f0') {
                        key.style.background = '#f72585';
                    } else if (status === 'absent' && !key.style.background) {
                        key.style.background = '#7209b7';
                    }
                }
            });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStats() {
            document.getElementById('current-attempt').textContent = 
                `${currentGame.attempts + 1}/${currentGame.maxAttempts}`;
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
        function showMessage(text) {
            const messageElement = document.getElementById('game-message');
            messageElement.textContent = text;
            
            // –í–∏–±—Ä–∞—Ü–∏—è –≤ Telegram
            if (tg.platform !== 'unknown') {
                tg.HapticFeedback.impactOccurred('light');
            }
        }

        // –ù–æ–≤–∞—è –∏–≥—Ä–∞
        function newGame() {
            currentGame = {
                word: WORDS[Math.floor(Math.random() * WORDS.length)],
                attempts: 0,
                maxAttempts: 6,
                currentGuess: '',
                gameOver: false,
                guessed: false
            };
            
            console.log('New word:', currentGame.word);
            
            createGameBoard();
            createKeyboard();
            updateStats();
            showMessage('–£–≥–∞–¥–∞–π —Å–ª–æ–≤–æ –∏–∑ 5 –±—É–∫–≤!');
        }

        // –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
        function shareResult() {
            if (!currentGame.gameOver) {
                showMessage('–°–Ω–∞—á–∞–ª–∞ –∑–∞–≤–µ—Ä—à–∏—Ç–µ –∏–≥—Ä—É!');
                return;
            }
            
            let shareText = `üéØ Wordle\n`;
            
            if (currentGame.guessed) {
                shareText += `–£–≥–∞–¥–∞–ª —Å–ª–æ–≤–æ –∑–∞ ${currentGame.attempts}/6 –ø–æ–ø—ã—Ç–æ–∫!\n`;
            } else {
                shareText += `–ù–µ —É–≥–∞–¥–∞–ª —Å–ª–æ–≤–æ: ${currentGame.word}\n`;
            }
            
            shareText += `\n–ü–æ–ø—Ä–æ–±—É–π —Å—ã–≥—Ä–∞—Ç—å!`;
            
            // –ö–æ–ø–∏—Ä—É–µ–º –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
            navigator.clipboard.writeText(shareText).then(() => {
                showMessage('–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω! –û—Ç–ø—Ä–∞–≤—å –¥—Ä—É–≥—É!');
            });
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        document.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                handleKeyPress('ENTER');
            } else if (event.key === 'Backspace') {
                handleKeyPress('BACKSPACE');
            } else if (event.key.length === 1 && /[–∞-—è–ê-–Øa-zA-Z]/.test(event.key)) {
                handleKeyPress(event.key.toUpperCase());
            }
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>